- branches:
    only:
    - release-*

  skip_tags: false
  configuration: release
  platform: Any CPU

  artifacts:
    - path: src\build\Release
    - path: src\build\Release\*.nupkg

  cache:
    - src\packages -> src\**\packages.config

  before_build:
    - appveyor DownloadFile https://dist.nuget.org/win-x86-commandline/v3.2.0/nuget.exe
    - nuget restore "src\Radical.Windows.sln"

  build:
    project: src\Radical.Windows.sln
    verbosity: minimal

  after_build:
    - md "src\build\nuget"
    - nuget pack "src\nuget\Radical.Windows.nuspec" -Version "%GitVersion_NuGetVersion%" -Properties "configuration=%CONFIGURATION%" -OutputDirectory "src\build\nuget"
